# 勤務表Webアプリケーション

## 概要

このプロジェクトは、従業員の日々の勤務状況を記録し、月次の作業報告書として管理・印刷するためのWebアプリケーションです。

バックエンドはPythonの軽量フレームワークであるFlask、フロントエンドはモダンなJavaScriptライブラリのReactを使用して構築されており、シンプルながらも実用的な機能を提供します。

## 主な機能

- **作業報告書の作成**: ExcelライクなUIで、日付、出退勤時刻、休憩時間、作業内容を直感的に入力できます。
- **自動計算機能**: 勤務時間や休憩時間を入力すると、実働時間が自動で計算・表示されます。
- **日報機能**: 日々の詳細な業務内容や課題、翌日の予定などを記録し、月ごとに一覧で確認できます。
- **マスターメンテナンス**: 管理者権限を持つユーザー（オーナー）が、社員情報の追加や更新を行えます。
- **印刷プレビュー**: 作成した作業報告書を、A4用紙に最適化された印刷用レイアウトでプレビュー・印刷できます。

## 技術スタック

本アプリケーションは、以下の技術要素で構成されています。

| 領域 | 技術 | 目的 |
| :--- | :--- | :--- |
| **バックエンド** | Python 3, Flask | APIサーバーの構築、ビジネスロジックの実装 |
| **データベース** | SQLite3 | アプリケーションデータの永続化 |
| **フロントエンド** | React 18, Vite | UIの構築、インタラクティブなユーザー体験の提供 |
| **スタイリング** | Tailwind CSS | モダンで効率的なCSSスタイリング |
| **HTTPクライアント**| axios | フロントエンドとバックエンド間の非同期通信 |
| **その他** | react-modal, react-to-print | モーダルウィンドウ、印刷機能の実装 |

## 開発環境のセットアップ

### 前提条件

- Python 3.8 以降
- Node.js 18.0 以降
- `pip` (Pythonパッケージインストーラ)
- `npm` (Node.jsパッケージマネージャ)

### セットアップ手順

1.  **リポジトリのクローン**:
    ```sh
    git clone <repository-url>
    cd <repository-directory>
    ```

2.  **バックエンドのセットアップ**:
    ターミナルで以下のコマンドを実行します。
    ```sh
    # 依存Pythonパッケージをインストール
    pip install -r back_end/requirements.txt

    # データベースを初期化（注意：既存のデータはすべて消去されます）
    python back_end/init_db.py
    ```

3.  **フロントエンドのセットアップ**:
    `front_end`ディレクトリに移動し、依存npmパッケージをインストールします。
    ```sh
    cd front_end
    npm install
    cd ..
    ```

## アプリケーションの起動

開発環境でアプリケーションを起動するには、バックエンドサーバーとフロントエンド開発サーバーの両方を実行する必要があります。ターミナルを2つ開いて、それぞれで以下のコマンドを実行してください。

- **ターミナル 1 (バックエンド)**:
  ```sh
  python back_end/app.py
  ```
  *バックエンドサーバーが `http://localhost:5000` で起動します。*

- **ターミナル 2 (フロントエンド)**:
  ```sh
  cd front_end
  npm run dev
  ```
  *フロントエンド開発サーバーが `http://localhost:5173` で起動します。*

起動後、Webブラウザで `http://localhost:5173` にアクセスすると、アプリケーションが表示されます。

## プロジェクト構成

```
.
├── back_end/
│   ├── app.py                  # Flaskメインアプリ、APIエンドポイント
│   ├── attendance_calculator.py  # 勤怠時間計算ロジック
│   ├── init_db.py              # DB初期化スクリプト
│   ├── schema.sql              # DBスキーマ定義
│   ├── requirements.txt        # Python依存パッケージ
│   └── num.id                  # オーナー社員ID設定ファイル
│
└── front_end/
    ├── src/
    │   ├── App.jsx             # Reactアプリケーションのルートコンポーネント
    │   ├── main.jsx            # アプリケーションのエントリーポイント
    │   └── components/         # Reactコンポーネント群
    ├── public/                 # 静的アセット
    ├── vite.config.js          # Vite設定ファイル (プロキシ含む)
    └── package.json            # npm依存パッケージ
```

## 本番環境へのデプロイ

本番環境でアプリケーションを運用するための手順です。

### 1. フロントエンドのビルド

フロントエンドのReactアプリケーションを、配信用に最適化された静的ファイル（HTML, CSS, JavaScript）に変換します。

```sh
cd front_end
npm run build
cd ..
```
これにより、`front_end/dist` ディレクトリに本番用のファイルが生成されます。バックエンドサーバーは、このディレクトリからフロントエンドのファイルを提供します。

### 2. 本番用サーバーの起動

`waitress` というWSGIサーバーを使用して、バックエンドのFlaskアプリケーションを起動します。`waitress`は、開発用サーバーよりも堅牢で、本番環境での使用に適しています。

```sh
waitress-serve --host 0.0.0.0 --port 5000 back_end.app:app
```

-   `--host 0.0.0.0`: サーバーを実行しているマシンのIPアドレスに対するすべてのリクエストを受け付けます。これにより、他のコンピューターからサーバーにアクセスできます。
-   `--port 5000`: サーバーが5000番ポートで待機します。

### 3. アプリケーションへのアクセス

サーバーを起動した後、同じネットワーク上の任意のコンピューターのWebブラウザで、以下のアドレスにアクセスします。

`http://<サーバーのIPアドレス>:5000`

これで、本番環境で動作しているアプリケーションが表示されます。
