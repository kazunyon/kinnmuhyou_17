# 勤務表Webアプリケーション (Work Attendance Management System)

このリポジトリは、従業員の勤務管理、日報作成、および月次報告書の自動生成を行うWebアプリケーションのソースコードを含んでいます。
ReactとFlaskを用いたモダンなWeb開発スタックを採用し、直感的なUIと堅牢なバックエンド機能を提供します。

## 目次

1. [プロジェクトの目的](#プロジェクトの目的)
2. [主な機能](#主な機能)
3. [システム要件](#システム要件)
4. [セットアップ手順](#セットアップ手順)
   - [バックエンドのセットアップ](#バックエンドのセットアップ)
   - [フロントエンドのセットアップ](#フロントエンドのセットアップ)
5. [開発サーバーの起動](#開発サーバーの起動)
6. [使用方法](#使用方法)
7. [プロジェクト構成](#プロジェクト構成)
8. [本番環境へのデプロイ](#本番環境へのデプロイ)
9. [貢献](#貢献)
10. [ライセンス](#ライセンス)

## プロジェクトの目的

このアプリケーションは、中小規模の企業やチーム向けに、以下の課題を解決するために開発されました。

*   手作業による勤怠計算のミス削減
*   Excel等による煩雑なファイル管理からの脱却
*   日報と月次報告書の一元管理
*   承認フローの電子化による効率化

## 主な機能

*   **作業報告書作成**: 日々の出退勤時間、休憩時間、作業内容をWebブラウザから入力・保存できます。
*   **自動計算**: 実働時間、残業時間、深夜労働時間を自動的に計算し、人的ミスを防ぎます。
*   **日報管理**: その日の業務詳細、問題点、翌日の予定などを記録し、振り返りを容易にします。
*   **ステータス管理**: 「下書き」「提出済」「承認済」「差戻し」「完了」のステータスフローにより、提出状況を可視化します。
*   **マスターメンテナンス**: 社員、取引先、案件情報をGUIから簡単に管理できます（管理者権限）。
*   **印刷機能**: A4用紙に最適化されたレイアウトで、報告書や日報一覧を印刷・PDF化できます。

## システム要件

開発および実行には以下の環境が必要です。

*   **Python**: 3.8 以上
*   **Node.js**: 18.0 以上
*   **npm**: Node.jsに同梱されているパッケージマネージャ
*   **Webブラウザ**: Google Chrome, Microsoft Edge, Firefox などのモダンブラウザ

## セットアップ手順

### バックエンドのセットアップ

バックエンドはPythonのFlaskフレームワークを使用しています。

1.  プロジェクトのルートディレクトリで、必要なPythonパッケージをインストールします。
    ```bash
    pip install -r back_end/requirements.txt
    ```

2.  データベースを初期化します。
    *   **注意**: この操作を行うと、既存のデータベース（`back_end/database.db`）は削除され、初期データで再作成されます。
    ```bash
    python back_end/init_db.py
    ```

### フロントエンドのセットアップ

フロントエンドはReactとViteを使用しています。

1.  `front_end` ディレクトリに移動します。
    ```bash
    cd front_end
    ```

2.  必要なnpmパッケージをインストールします。
    ```bash
    npm install
    ```

## 開発サーバーの起動

開発中は、バックエンドとフロントエンドの両方のサーバーを起動する必要があります。それぞれ別のターミナルウィンドウを開いて実行してください。

**ターミナル 1 (バックエンド)**
```bash
python back_end/app.py
```
*   バックエンドサーバーが `http://127.0.0.1:5000` で起動します。

**ターミナル 2 (フロントエンド)**
```bash
cd front_end
npm run dev
```
*   フロントエンド開発サーバーが `http://localhost:5173` で起動します。
*   ブラウザで `http://localhost:5173` にアクセスしてアプリケーションを使用します。

## 使用方法

### 一般社員の方
1.  **ログイン**: 自身のIDとパスワードでログインします（初期パスワードは管理者に確認してください）。
2.  **日々の入力**: カレンダーの日付を選択または行をダブルクリックして、出退勤時刻や日報を入力します。
3.  **保存**: こまめに「保存」ボタンを押してデータを保存してください。
4.  **提出**: 月末に内容を確認し、「提出する」ボタンを押して管理者に報告書を提出します。

### 管理者（部長・経理）の方
1.  **承認**: 提出された報告書を確認し、「承認」または「差戻し」を行います。
2.  **マスター管理**: 「マスター」ボタンから、社員情報の追加・編集や、取引先・案件の管理を行います。
3.  **承認状況確認**: 「承認状況表」から、全社員の提出状況を一覧で確認できます。

## プロジェクト構成

主要なディレクトリとファイルの説明です。

```
.
├── back_end/               # バックエンド (Python/Flask)
│   ├── app.py              # アプリケーションのエントリーポイント (API定義)
│   ├── attendance_calculator.py  # 勤怠計算ロジック
│   ├── database.db         # SQLiteデータベースファイル (自動生成)
│   ├── init_db.py          # データベース初期化スクリプト
│   ├── schema.sql          # データベーススキーマ定義
│   └── requirements.txt    # Python依存関係リスト
│
└── front_end/              # フロントエンド (React/Vite)
    ├── public/             # 静的アセット (faviconなど)
    ├── src/
    │   ├── components/     # Reactコンポーネント (画面、モーダル、テーブルなど)
    │   ├── utils/          # ユーティリティ関数 (日付・時間操作など)
    │   ├── App.jsx         # メインアプリケーションコンポーネント
    │   └── main.jsx        # エントリーポイント
    ├── index.html          # HTMLテンプレート
    ├── package.json        # npm依存関係リスト
    └── vite.config.js      # Vite設定ファイル
```

## 本番環境へのデプロイ

本番環境（プロダクション）で動作させる場合の基本的な手順です。

1.  **フロントエンドのビルド**:
    Reactアプリケーションを静的ファイルにコンパイルします。
    ```bash
    cd front_end
    npm run build
    ```
    これにより、`front_end/dist` ディレクトリにファイルが生成されます。バックエンドサーバーはここから静的ファイルを配信するように設定されています。

2.  **WSGIサーバーでの起動**:
    開発用の `app.py` を直接実行するのではなく、`waitress` などのWSGIサーバーを使用して起動することを推奨します。
    ```bash
    # Windowsの場合の例
    waitress-serve --host 0.0.0.0 --port 5000 --call back_end.app:app
    ```
    (パスは環境に合わせて調整してください)

## 貢献

バグ報告や機能追加の要望は、IssueやPull Requestにて受け付けています。コードの品質向上のため、コミット前には十分なテストを行ってください。

## ライセンス

このプロジェクトは [MIT License](LICENSE) の下で提供されています。
